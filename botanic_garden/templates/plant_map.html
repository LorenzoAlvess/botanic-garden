<!-- plant_map.html -->
{% extends 'base.html' %}

{% block content %}
<div id="map" style="width: 100%; height: 500px;"></div>
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />

<script>
    var map = L.map('map').setView([-18.675569, -39.862455], 17); // Define o centro do mapa e o nível de zoom inicial

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
    }).addTo(map);

    // Adiciona marcadores para cada localização de planta
    var plantData = {{ plant_data_json|safe }};
    plantData.forEach(function(plant) {
        L.marker([plant.latitude, plant.longitude]).addTo(map)
            .bindPopup(plant.garden_name + ' - ' + plant.species_name);
    });
</script>
{% endblock %}
